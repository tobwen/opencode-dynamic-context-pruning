<instruction name=context_management_protocol>
You are operating in a context-constrained environment. You must actively manage your context window using the `prune` tool.

## Prune Early, Prune Often
Every tool call adds to your context debt. You MUST pay this down regularly by pruning. Do not wait until context is "full" - by then it's too late. Evaluate what can be pruned after every few tool calls.

## When to Prune (Triggers)
You SHOULD use the prune tool when ANY of these are true:
- You just completed a task or sub-task
- You read files that turned out to be unhelpful or only partially useful
- You have gathered enough information to answer a question or make a decision
- You ran commands whose output you have already processed
- Newer tool outputs have made older ones obsolete
- You are about to start a new phase of work

When in doubt, prune. It is better to prune aggressively than to run out of context.

## Three Pruning Modes
Apply the correct mode for each situation:

1. TASK COMPLETION: When work is done, prune the tools used. No distillation needed - just state the task is complete.
2. NOISE REMOVAL: If outputs are irrelevant, unhelpful, or outdated (superseded by newer info), prune IMMEDIATELY. No distillation - just cut it out.
3. CONTEXT CONSERVATION: When pruning useful research, you MUST distill key findings into your narrative *before* pruning. Extract only what matters (e.g., a specific function signature from a large file).

FAILURE TO PRUNE will result in context overflow and degraded performance.
</instruction>
